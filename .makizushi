#!/bin/bash

chrootdir='/var/mychroots'

declare -A chroots
chroots=(['stable32']='linux32' ['stable64']='linux64')

packager='Thomas Dziedzic < gostrc at gmail >'
makeflags='-j2'

mkchrs() {
  for k in ${!chroots[@]} ; do
    ${chroots[$k]} sudo makechrootpkg -c -r ${chrootdir}/${k}
  done
}

upchrs() {
  for k in ${!chroots[@]} ; do
    ${chroots[$k]} sudo mkarchroot -u ${chrootdir}/${k}/root
  done
}

newchrs() {
  sudo rm -rf ${chrootdir}

  for k in ${!chroots[@]} ; do
    sudo mkdir -p ${chrootdir}/${k}
    ${chroots[$k]} sudo mkarchroot ${chrootdir}/${k}/root base base-devel sudo

    # needed if adding support for [testing]
    #sudo ${EDITOR} ${chrootdir}/${chrootname[$i]}/root/etc/pacman.conf

    sudo sed "s/#PACKAGER=.*/PACKAGER='${packager}'/" -i ${chrootdir}/${k}/root/etc/makepkg.conf
    sudo sed "s/#MAKEFLAGS=.*/MAKEFLAGS='${makeflags}'/" -i ${chrootdir}/${k}/root/etc/makepkg.conf
  done
}

alias db-aur='ssh aur.archlinux.org /arch/db-update'
